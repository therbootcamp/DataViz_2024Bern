<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Styling</title>
    <meta charset="utf-8" />
    <meta name="author" content="Visualizing and communicating data with R   The R Bootcamp @ UniBE                  " />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link rel="stylesheet" href="baselrbootcamp.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Styling
]
.author[
### Visualizing and communicating data with R<br> <a href='https://therbootcamp.github.io'> <font style='font-size:1.4em'>The R Bootcamp @ UniBE</font> </a> <br> <a href='https://therbootcamp.github.io/DataViz_2024Bern/'> <i class='fas fa-clock' style='font-size:1.4em;'></i> </a>  <a href='https://therbootcamp.github.io'> <i class='fas fa-home' style='font-size:1.4em;' ></i> </a>  <a href='therbootcamp@gmail.com'> <i class='fas fa-envelope' style='font-size: 1.4em;'></i> </a>  <a href='https://www.linkedin.com/company/27090302'> <i class='fab fa-linkedin' style='font-size: 1.4em;'></i> </a>
]
.date[
### June 2024
]

---


layout: true

&lt;div class="my-footer"&gt;
  &lt;span style="text-align:center"&gt;
    &lt;span&gt; 
      &lt;img src="https://raw.githubusercontent.com/therbootcamp/therbootcamp.github.io/master/_sessions/_image/by-sa.png" height=14 style="vertical-align: middle"/&gt;
    &lt;/span&gt;
    &lt;a href="https://therbootcamp.github.io/"&gt;
      &lt;span style="padding-left:82px"&gt; 
        &lt;font color="#7E7E7E"&gt;
          https://therbootcamp.github.io
        &lt;/font&gt;
      &lt;/span&gt;
    &lt;/a&gt;
    &lt;a href="https://therbootcamp.github.io/"&gt;
      &lt;font color="#7E7E7E"&gt;
      The R Bootcamp | June 2024
      &lt;/font&gt;
    &lt;/a&gt;
    &lt;/span&gt;
  &lt;/div&gt; 

---





.pull-left45[

# Styling plots

&lt;ul&gt;
  &lt;li class="m1"&gt;&lt;span&gt;Save plot as &lt;highm&gt;gg&lt;/highm&gt; object.&lt;/span&gt;&lt;/li&gt;
  &lt;li class="m2"&gt;&lt;span&gt;Use existing &lt;highm&gt;theme_*()&lt;/highm&gt; presets.&lt;/span&gt;&lt;/li&gt;
  &lt;li class="m3"&gt;&lt;span&gt;Customize details using &lt;highm&gt;theme()&lt;/highm&gt;.&lt;/span&gt;&lt;/li&gt;
  &lt;li class="m4"&gt;&lt;span&gt;Adjust dimensions using &lt;highm&gt;scale_*()&lt;/highm&gt;.&lt;/span&gt;&lt;/li&gt;
  &lt;li class="m5"&gt;&lt;span&gt;Add an notion using &lt;highm&gt;labs()&lt;/highm&gt;.&lt;/span&gt;&lt;/li&gt;
  &lt;li class="m6"&gt;&lt;span&gt;Write your plot as a &lt;highm&gt;.pdf&lt;/highm&gt; or &lt;highm&gt;.png&lt;/highm&gt;.&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;

]


.pull-right45[


&lt;br&gt;

&lt;img src="styling_files/figure-html/unnamed-chunk-2-1.png" style="display: block; margin: auto;" /&gt;
]


---

.pull-left45[

# The &lt;mono&gt;gg&lt;/mono&gt; object

&lt;ul&gt;
  &lt;li class="m1"&gt;&lt;span&gt;The output of &lt;mono&gt;ggplot()&lt;/mono&gt; can be stored in an &lt;mono&gt;gg&lt;/mono&gt; object.&lt;/span&gt;&lt;/li&gt;
  &lt;li class="m2"&gt;&lt;span&gt;The &lt;mono&gt;gg&lt;/mono&gt; object can be expanded using &lt;mono&gt;+&lt;/mono&gt; and the plot can be generated by a simple print.&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;br&gt;


```r
# store plot as object
my_plot &lt;- ggplot(basel, 
                 aes(x = year, 
                 y = income_median, 
                 col = quarter)) +
  geom_line() + 
  geom_point()
```

]

.pull-right45[

&lt;br&gt;


```r
my_plot 
```

&lt;img src="styling_files/figure-html/unnamed-chunk-4-1.png" style="display: block; margin: auto;" /&gt;

]


---

.pull-left45[

# `theme_*()`


&lt;ul&gt;
  &lt;li class="m1"&gt;&lt;span&gt;Using &lt;mono&gt;theme_*()&lt;/mono&gt; the plot can be styled according to  various presets.&lt;/span&gt;&lt;/li&gt;
  &lt;li class="m2"&gt;&lt;span&gt;A few &lt;mono&gt;theme&lt;/mono&gt;s:
  &lt;br&gt;&lt;br&gt;
  &lt;ul class="level"&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;theme_gray()&lt;/mono&gt;&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;theme_classic()&lt;/mono&gt;&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;theme_void()&lt;/mono&gt;&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;theme_minimal()&lt;/mono&gt;&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;theme_excel() (&lt;mono&gt;ggthemes&lt;/mono&gt;)&lt;/mono&gt;&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;theme_economist() (&lt;mono&gt;ggthemes&lt;/mono&gt;)&lt;/mono&gt;&lt;/span&gt;&lt;/li&gt;
  &lt;/ul&gt;
  &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;

]

.pull-right45[

&lt;br&gt;


```r
my_plot + theme_classic()
```

&lt;img src="styling_files/figure-html/unnamed-chunk-5-1.png" style="display: block; margin: auto;" /&gt;

]

---

.pull-left45[

# `theme_*()`

&lt;ul&gt;
  &lt;li class="m1"&gt;&lt;span&gt;Using &lt;mono&gt;theme_*()&lt;/mono&gt; the plot can be styled according to  various presets.&lt;/span&gt;&lt;/li&gt;
  &lt;li class="m2"&gt;&lt;span&gt;A few &lt;mono&gt;theme&lt;/mono&gt;s:
  &lt;br&gt;&lt;br&gt;
  &lt;ul class="level"&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;theme_gray()&lt;/mono&gt;&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;theme_classic()&lt;/mono&gt;&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;theme_void()&lt;/mono&gt;&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;theme_minimal()&lt;/mono&gt;&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;theme_excel() (&lt;mono&gt;ggthemes&lt;/mono&gt;)&lt;/mono&gt;&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;theme_economist() (&lt;mono&gt;ggthemes&lt;/mono&gt;)&lt;/mono&gt;&lt;/span&gt;&lt;/li&gt;
  &lt;/ul&gt;
  &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;

]

.pull-right45[

&lt;br&gt;


```r
my_plot + theme_excel()
```

&lt;img src="styling_files/figure-html/unnamed-chunk-6-1.png" style="display: block; margin: auto;" /&gt;

]


---

.pull-left45[

# `theme_*()`

&lt;ul&gt;
  &lt;li class="m1"&gt;&lt;span&gt;Using &lt;mono&gt;theme_*()&lt;/mono&gt; the plot can be styled according to  various presets.&lt;/span&gt;&lt;/li&gt;
  &lt;li class="m2"&gt;&lt;span&gt;A few &lt;mono&gt;theme&lt;/mono&gt;s:
  &lt;br&gt;&lt;br&gt;
  &lt;ul class="level"&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;theme_gray()&lt;/mono&gt;&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;theme_classic()&lt;/mono&gt;&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;theme_void()&lt;/mono&gt;&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;theme_minimal()&lt;/mono&gt;&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;theme_excel() (&lt;mono&gt;ggthemes&lt;/mono&gt;)&lt;/mono&gt;&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;theme_economist() (&lt;mono&gt;ggthemes&lt;/mono&gt;)&lt;/mono&gt;&lt;/span&gt;&lt;/li&gt;
  &lt;/ul&gt;
  &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;

]

.pull-right45[

&lt;br&gt;


```r
my_plot + theme_economist()
```

&lt;img src="styling_files/figure-html/unnamed-chunk-7-1.png" style="display: block; margin: auto;" /&gt;

]

---

.pull-left45[

# `theme_*()`

&lt;ul&gt;
  &lt;li class="m1"&gt;&lt;span&gt;Using &lt;mono&gt;theme_*()&lt;/mono&gt; the plot can be styled according to  various presets.&lt;/span&gt;&lt;/li&gt;
  &lt;li class="m2"&gt;&lt;span&gt;A few &lt;mono&gt;theme&lt;/mono&gt;s:
  &lt;br&gt;&lt;br&gt;
  &lt;ul class="level"&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;theme_gray()&lt;/mono&gt;&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;theme_classic()&lt;/mono&gt;&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;theme_void()&lt;/mono&gt;&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;theme_minimal()&lt;/mono&gt;&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;theme_excel() (&lt;mono&gt;ggthemes&lt;/mono&gt;)&lt;/mono&gt;&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;theme_economist() (&lt;mono&gt;ggthemes&lt;/mono&gt;)&lt;/mono&gt;&lt;/span&gt;&lt;/li&gt;
  &lt;/ul&gt;
  &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;

]

.pull-right45[

&lt;br&gt;


```r
my_plot + theme_wsj()
```

&lt;img src="styling_files/figure-html/unnamed-chunk-8-1.png" style="display: block; margin: auto;" /&gt;

]

---

.pull-left45[

# `theme_*()`

&lt;ul&gt;
  &lt;li class="m1"&gt;&lt;span&gt;Using &lt;mono&gt;theme_*()&lt;/mono&gt; the plot can be styled according to  various presets.&lt;/span&gt;&lt;/li&gt;
  &lt;li class="m2"&gt;&lt;span&gt;A few &lt;mono&gt;theme&lt;/mono&gt;s:
  &lt;br&gt;&lt;br&gt;
  &lt;ul class="level"&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;theme_gray()&lt;/mono&gt;&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;theme_classic()&lt;/mono&gt;&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;theme_void()&lt;/mono&gt;&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;theme_minimal()&lt;/mono&gt;&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;theme_excel() (&lt;mono&gt;ggthemes&lt;/mono&gt;)&lt;/mono&gt;&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;theme_economist() (&lt;mono&gt;ggthemes&lt;/mono&gt;)&lt;/mono&gt;&lt;/span&gt;&lt;/li&gt;
  &lt;/ul&gt;
  &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;

]

.pull-right45[

&lt;br&gt;


```r
my_plot + theme_minimal()
```

&lt;img src="styling_files/figure-html/unnamed-chunk-9-1.png" style="display: block; margin: auto;" /&gt;

]


---

# `theme()`

.pull-left45[

&lt;ul&gt;
  &lt;li class="m1"&gt;&lt;span&gt;With &lt;high&gt;96 arguments&lt;/high&gt; &lt;mono&gt;theme()&lt;/mono&gt; permits specification of all aesthetic details.&lt;/span&gt;&lt;/li&gt;
  &lt;li class="m2"&gt;&lt;span&gt;Makes uses of helper functions:&lt;/span&gt;&lt;/li&gt;
  &lt;ul class="level"&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;element_rect()&lt;/mono&gt; | for rectangles&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;element_line()&lt;/mono&gt; | for lines&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;element_text()&lt;/mono&gt; | for text&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;element_blank()&lt;/mono&gt; | for removals&lt;/span&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/ul&gt;

&lt;br&gt;


```r
# Using theme
my_plot + 
  theme(argument = element_*(), 
        argument = element_*(),
        ...)
```

]


.pull-right45[

&lt;p align="center"&gt;
&lt;img src="image/theme.png"&gt;
&lt;/p&gt;
]

---

.pull-left45[

# `theme()`

&lt;ul&gt;
  &lt;li class="m1"&gt;&lt;span&gt;With &lt;high&gt;96 arguments&lt;/high&gt; &lt;mono&gt;theme()&lt;/mono&gt; permits specification of all aesthetic details.&lt;/span&gt;&lt;/li&gt;
  &lt;li class="m2"&gt;&lt;span&gt;Makes uses of helper functions:&lt;/span&gt;&lt;/li&gt;
  &lt;ul class="level"&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;element_rect()&lt;/mono&gt; | for rectangles&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;element_line()&lt;/mono&gt; | for lines&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;element_text()&lt;/mono&gt; | for text&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;element_blank()&lt;/mono&gt; | for removals&lt;/span&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/ul&gt;

&lt;br&gt;


```r
# Fixing the legend
my_plot + 
  theme_minimal() +
  
  # move legend to bottom
  theme(legend.position = "bottom")
```

]


.pull-right45[

&lt;br&gt;

&lt;img src="styling_files/figure-html/unnamed-chunk-12-1.png" style="display: block; margin: auto;" /&gt;

]

---

.pull-left45[

# `theme()`

&lt;ul&gt;
  &lt;li class="m1"&gt;&lt;span&gt;With &lt;high&gt;96 arguments&lt;/high&gt; &lt;mono&gt;theme()&lt;/mono&gt; permits specification of all aesthetic details.&lt;/span&gt;&lt;/li&gt;
  &lt;li class="m2"&gt;&lt;span&gt;Makes uses of helper functions:&lt;/span&gt;&lt;/li&gt;
  &lt;ul class="level"&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;element_rect()&lt;/mono&gt; | for rectangles&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;element_line()&lt;/mono&gt; | for lines&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;element_text()&lt;/mono&gt; | for text&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;element_blank()&lt;/mono&gt; | for removals&lt;/span&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/ul&gt;

&lt;br&gt;


```r
# Fixing the legend
my_plot + 
  theme_minimal() +
  theme(legend.position = "bottom",
        
        # remove legend title
        legend.title = element_blank())
```

]


.pull-right45[

&lt;br&gt;

&lt;img src="styling_files/figure-html/unnamed-chunk-14-1.png" style="display: block; margin: auto;" /&gt;

]

---

.pull-left45[

# `theme()`

&lt;ul&gt;
  &lt;li class="m1"&gt;&lt;span&gt;With &lt;high&gt;87 arguments&lt;/high&gt; &lt;mono&gt;theme()&lt;/mono&gt; permits specification of all aesthetic details.&lt;/span&gt;&lt;/li&gt;
  &lt;li class="m2"&gt;&lt;span&gt;Makes uses of helper functions:&lt;/span&gt;&lt;/li&gt;
  &lt;ul class="level"&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;element_rect()&lt;/mono&gt; | for rectangles&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;element_line()&lt;/mono&gt; | for lines&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;element_text()&lt;/mono&gt; | for text&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;element_blank()&lt;/mono&gt; | for removals&lt;/span&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/ul&gt;

&lt;br&gt;


```r
# Fixing the legend
my_plot + 
  theme_minimal() +
  theme(
    legend.position = "bottom",
    legend.title = element_blank(),
    
    # reduce legend text size
    legend.text = element_text(size = 7))
```

]


.pull-right45[

&lt;br&gt;

&lt;img src="styling_files/figure-html/unnamed-chunk-16-1.png" style="display: block; margin: auto;" /&gt;

]


---

.pull-left45[

# `theme`

&lt;ul&gt;
  &lt;li class="m1"&gt;&lt;span&gt;&lt;mono&gt;theme&lt;/mono&gt;s can be stored in an object.&lt;/span&gt;&lt;/li&gt;
  &lt;li class="m2"&gt;&lt;span&gt;&lt;mono&gt;theme&lt;/mono&gt; objects are not functions.&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;br&gt;


```r
# save my theme
my_theme &lt;- theme(
  legend.position = "bottom",
  legend.title = element_blank(),
  legend.text = element_text(size = 7))


# Add my theme
my_plot + 
  theme_minimal() + 
  my_theme
```

]


.pull-right45[

&lt;br&gt;

&lt;img src="styling_files/figure-html/unnamed-chunk-18-1.png" style="display: block; margin: auto;" /&gt;

]





---

.pull-left45[

# `scale_*()`

&lt;ul&gt;
  &lt;li class="m1"&gt;&lt;span&gt;Various &lt;mono&gt;scale_*()&lt;/mono&gt; permit specification of all &lt;high&gt;dimensions&lt;/high&gt;, including axes, colors, sizes, etc.&lt;/span&gt;&lt;/li&gt;
  &lt;li class="m2"&gt;&lt;span&gt;Groups of &lt;mono&gt;scale_*()&lt;/mono&gt; functions:&lt;/span&gt;&lt;/li&gt;
  &lt;ul class="level"&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;scale_xy_*&lt;/mono&gt; | Scales axes&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;scale_color_*&lt;/mono&gt; | Scales colors&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;scale_size_*&lt;/mono&gt; | Scales sizes&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;scale_alpha_*&lt;/mono&gt; | Scales opacity&lt;/span&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/ul&gt;

]

.pull-right45[

&lt;br&gt;

&lt;img src="styling_files/figure-html/unnamed-chunk-19-1.png" style="display: block; margin: auto;" /&gt;

]

---

.pull-left45[

# `scale_*()`

&lt;ul&gt;
  &lt;li class="m1"&gt;&lt;span&gt;Various &lt;mono&gt;scale_*()&lt;/mono&gt; permit specification of all &lt;high&gt;dimensions&lt;/high&gt;, including axes, colors, sizes, etc.&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;


```r
# Fixing the legend
my_plot + 
  theme_minimal() +
  theme(
    legend.position = "bottom",
    legend.title = element_blank(),
    legend.text = element_text(size=7)) + 
  
  # color using viridis
  scale_color_viridis_d()
```


]

.pull-right45[

&lt;br&gt;

&lt;img src="styling_files/figure-html/unnamed-chunk-21-1.png" style="display: block; margin: auto;" /&gt;

]

---

.pull-left45[

# Wrangling

&lt;ul&gt;
  &lt;li class="m1"&gt;&lt;span&gt;Again, wrangling can help with plotting.&lt;/span&gt;&lt;/li&gt;
  &lt;li class="m2"&gt;&lt;span&gt;The order of discrete variables can be controlled using &lt;highm&gt;factors&lt;/highm&gt;.&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;




```r
# change data
basel_order &lt;- basel %&gt;%
    
  # factor ordered by income in 2001
  arrange(year, income_median) %&gt;% 
  mutate(quarter = as_factor(quarter))

# show data
basel_order
```


]

.pull-right45[

&lt;br&gt;&lt;br&gt;&lt;br&gt;


```
# A tibble: 357 × 10
    year quarter        quarter_no     N
   &lt;dbl&gt; &lt;fct&gt;               &lt;dbl&gt; &lt;dbl&gt;
 1  2001 Altstadt Klei…         12  1659
 2  2001 Clara                  13  2416
 3  2001 Matthäus               17  9089
 4  2001 Rosental               16  2499
 5  2001 Klybeck                18  4053
 6  2001 St. Johann             11 10493
 7  2001 Kleinhüningen          19  1363
 8  2001 Iselin                 10  9853
 9  2001 Gundeldingen            6 11224
10  2001 Breite                  4  5433
# ℹ 347 more rows
# ℹ 6 more variables:
#   income_mean &lt;dbl&gt;,
#   income_median &lt;dbl&gt;,
#   income_gini &lt;dbl&gt;,
#   wealth_mean &lt;dbl&gt;,
#   wealth_median &lt;dbl&gt;, …
```

]

---

.pull-left45[

# Wrangling

&lt;ul&gt;
  &lt;li class="m1"&gt;&lt;span&gt;Colors are assigned according to the &lt;high&gt;order of factor levels&lt;/high&gt;.&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;


```r
basel_order %&gt;%
  
  # original code
  ggplot(aes(x = year, y = income_median, 
             col = quarter)) +
  geom_line() + geom_point() +
  theme_minimal() +
  theme(
    legend.position = "bottom",
    legend.title = element_blank(),
    legend.text = element_text(size=7)) + 
  
  # ordered implicitly
  scale_color_viridis_d()
```


]

.pull-right45[

&lt;br&gt;

&lt;img src="styling_files/figure-html/unnamed-chunk-26-1.png" style="display: block; margin: auto;" /&gt;

]

---

.pull-left45[

# &lt;mono&gt;viridis&lt;/mono&gt;

&lt;ul&gt;
  &lt;li class="m1"&gt;&lt;span&gt;&lt;mono&gt;viridis&lt;/mono&gt; includes several preset color sets that can &lt;high&gt;useful for different scenarios&lt;/high&gt;.&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;


```r
basel_order %&gt;%
  
  # original code
  ggplot(aes(x = year, y = income_median, 
             col = quarter)) +
  geom_line() + geom_point() +
  theme_minimal() +
  theme(
    legend.position = "bottom",
    legend.title = element_blank(),
    legend.text = element_text(size=7)) + 
  
  # palette: Magma
  scale_color_viridis_d(option = "A")
```


]

.pull-right45[

&lt;br&gt;

&lt;img src="styling_files/figure-html/unnamed-chunk-28-1.png" style="display: block; margin: auto;" /&gt;

]

---

.pull-left45[

# &lt;mono&gt;viridis&lt;/mono&gt;

&lt;ul&gt;
  &lt;li class="m1"&gt;&lt;span&gt;&lt;mono&gt;viridis&lt;/mono&gt; includes several preset color sets that can &lt;high&gt;useful for different scenarios&lt;/high&gt;.&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;


```r
basel_order %&gt;%
  
  # original code
  ggplot(aes(x = year, y = income_median, 
             col = quarter)) +
  geom_line() + geom_point() +
  theme_minimal() +
  theme(
    legend.position = "bottom",
    legend.title = element_blank(),
    legend.text = element_text(size=7)) + 
  
  # palette: Inferno
  scale_color_viridis_d(option = "B")
```


]

.pull-right45[

&lt;br&gt;

&lt;img src="styling_files/figure-html/unnamed-chunk-30-1.png" style="display: block; margin: auto;" /&gt;

]

---

.pull-left45[

# &lt;mono&gt;viridis&lt;/mono&gt;

&lt;ul&gt;
  &lt;li class="m1"&gt;&lt;span&gt;&lt;mono&gt;viridis&lt;/mono&gt; includes several preset color sets that can &lt;high&gt;useful for different scenarios&lt;/high&gt;.&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;


```r
basel_order %&gt;%
  
  # original code
  ggplot(aes(x = year, y = income_median, 
             col = quarter)) +
  geom_line() + geom_point() +
  theme_minimal() +
  theme(
    legend.position = "bottom",
    legend.title = element_blank(),
    legend.text = element_text(size=7)) + 
  
  # palette: Plasma
  scale_color_viridis_d(option = "C")
```


]

.pull-right45[

&lt;br&gt;

&lt;img src="styling_files/figure-html/unnamed-chunk-32-1.png" style="display: block; margin: auto;" /&gt;

]

---

.pull-left45[

# &lt;mono&gt;viridis&lt;/mono&gt;

&lt;ul&gt;
  &lt;li class="m1"&gt;&lt;span&gt;&lt;mono&gt;viridis&lt;/mono&gt; includes several preset color sets that can &lt;high&gt;useful for different scenarios&lt;/high&gt;.&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;


```r
basel_order %&gt;%
  
  # original code
  ggplot(aes(x = year, y = income_median, 
             col = quarter)) +
  geom_line() + geom_point() +
  theme_minimal() +
  theme(
    legend.position = "bottom",
    legend.title = element_blank(),
    legend.text = element_text(size=7)) + 
  
  # palette: Cividis
  scale_color_viridis_d(option = "E")
```


]

.pull-right45[

&lt;br&gt;

&lt;img src="styling_files/figure-html/unnamed-chunk-34-1.png" style="display: block; margin: auto;" /&gt;

]

---

.pull-left45[

# &lt;mono&gt;viridis&lt;/mono&gt;

&lt;ul&gt;
  &lt;li class="m1"&gt;&lt;span&gt;&lt;mono&gt;viridis&lt;/mono&gt; includes several preset color sets that can &lt;high&gt;useful for different scenarios&lt;/high&gt;.&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;


```r
basel_order %&gt;%
  
  # original code
  ggplot(aes(x = year, y = income_median, 
             col = quarter)) +
  geom_line() + geom_point() +
  theme_minimal() +
  theme(
    legend.position = "bottom",
    legend.title = element_blank(),
    legend.text = element_text(size=7)) + 
  
  # palette: Viridis default
  scale_color_viridis_d(option = "D")
```


]

.pull-right45[

&lt;br&gt;

&lt;img src="styling_files/figure-html/unnamed-chunk-36-1.png" style="display: block; margin: auto;" /&gt;

]


---

.pull-left45[

# `labs()`

&lt;ul&gt;
  &lt;li class="m1"&gt;&lt;span&gt;Various annotations can be added using &lt;mono&gt;labs()&lt;/mono&gt;.&lt;/span&gt;&lt;/li&gt;
  &lt;li class="m2"&gt;&lt;span&gt;Key arguments:&lt;/span&gt;&lt;/li&gt;
  &lt;ul class="level"&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;x,y&lt;/mono&gt; | Axes&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;title, subtitle&lt;/mono&gt; | Title and Subtitle&lt;/high&gt;&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;caption&lt;/mono&gt; | Caption&lt;/high&gt;&lt;/span&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/ul&gt;



&lt;br&gt;


```r
my_plot +
  labs(x = "Year",
       y = "Median income",
       title = "Inequality in Basel",
       subtitle = "Income development...",
       caption = "Source: Open Data...")
```

]


.pull-right45[

&lt;br&gt;

&lt;img src="styling_files/figure-html/unnamed-chunk-39-1.png" style="display: block; margin: auto;" /&gt;

]

---

# Aggregates


.pull-left45[

&lt;ul&gt;
  &lt;li class="m1"&gt;&lt;span&gt;To visualize aggregates and error, first generate them using &lt;highm&gt;dplyr&lt;/highm&gt;.&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;






```r
basel_agg &lt;- basel %&gt;%
  
  # get income mean in 2001
  arrange(year, quarter) %&gt;% 
  group_by(quarter) %&gt;% 
  mutate(inc01 = first(income_med.)) %&gt;% 
  
  # group by year and quarter
  group_by(year, 
           hi = inc01 &gt; median(inc01)) %&gt;% 
  summarize(income = mean(income_med.)) %&gt;% 
  
  # remove grouping
  ungroup()

# show data
basel_agg
```


]

.pull-right45[


```
# A tibble: 34 × 3
    year hi    income
   &lt;dbl&gt; &lt;lgl&gt;  &lt;dbl&gt;
 1  2001 FALSE 43813 
 2  2001 TRUE  55790.
 3  2002 FALSE 44467.
 4  2002 TRUE  56225 
 5  2003 FALSE 43926.
 6  2003 TRUE  56088.
 7  2004 FALSE 43518.
 8  2004 TRUE  56011 
 9  2005 FALSE 43028.
10  2005 TRUE  55973.
# ℹ 24 more rows
```

]

---

.pull-left45[

# Aggregates

&lt;ul&gt;
  &lt;li class="m1"&gt;&lt;span&gt;To visualize aggregates and error, first generate them using &lt;highm&gt;dplyr&lt;/highm&gt;.&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;



```r
basel_agg %&gt;%
  
  # plot code
  ggplot(aes(x = year, y = income, 
             col = hi)) +
  geom_line() + geom_point() +
  theme_minimal() +
  theme(legend.position = "none") + 
  scale_color_viridis_d()
```


]

.pull-right45[

&lt;br&gt;

&lt;img src="styling_files/figure-html/unnamed-chunk-44-1.png" style="display: block; margin: auto;" /&gt;

]

---

.pull-left45[

# Error

&lt;ul&gt;
  &lt;li class="m1"&gt;&lt;span&gt;To visualize aggregates and error, first generate them using &lt;highm&gt;dplyr&lt;/highm&gt;.&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;



```r
# confidence interval function
ci = function(x) {
  n = length(x)
  sd(x) / sqrt(n) * qt(.975, n-1)}

# new data with error
basel_agg &lt;- basel %&gt;%
  
  # get income mean in 2001
  arrange(year, quarter) %&gt;% 
  group_by(quarter) %&gt;% 
  mutate(inc01 = first(income_median)) %&gt;% 
  
  # group by year and quarter
  group_by(year, 
           hi = inc01 &gt; median(inc01)) %&gt;% 
  summarize(inc_m = mean(income_median),
            inc_ci = ci(income_median)) 
```




]

.pull-right45[

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;


```
# A tibble: 34 × 4
    year hi     inc_m inc_ci
   &lt;dbl&gt; &lt;lgl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
 1  2001 FALSE 43813   1747.
 2  2001 TRUE  55790.  4435.
 3  2002 FALSE 44467.  1673.
 4  2002 TRUE  56225   4309.
 5  2003 FALSE 43926.  1922.
 6  2003 TRUE  56088.  4311.
 7  2004 FALSE 43518.  1853.
 8  2004 TRUE  56011   4658.
 9  2005 FALSE 43028.  2176.
10  2005 TRUE  55973.  4549.
# ℹ 24 more rows
```

]

---

.pull-left45[

# &lt;mono&gt;geom_errorbar()&lt;/mono&gt;

&lt;ul&gt;
  &lt;li class="m1"&gt;&lt;span&gt;&lt;mono&gt;geom_errorbar()&lt;/mono&gt; can be used to visualize &lt;high&gt;standard statistical error bars&lt;/high&gt;.&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;


```r
basel_agg %&gt;%
  
  # plot code
  ggplot(aes(x = year, y = income, 
             col = hi, fill = hi)) +
  
  # error bar geom inserted
  geom_errorbar(aes(ymin = inc_m - inc_ci,
                    ymax = inc_m + inc_ci)) + 

  ...
```


]

.pull-right45[

&lt;br&gt;

&lt;img src="styling_files/figure-html/unnamed-chunk-49-1.png" style="display: block; margin: auto;" /&gt;

]

---

.pull-left45[

# &lt;mono&gt;geom_ribbon()&lt;/mono&gt;

&lt;ul&gt;
  &lt;li class="m1"&gt;&lt;span&gt;&lt;mono&gt;geom_ribbon()&lt;/mono&gt; can be a replacement for &lt;high&gt;standard statistical error bars&lt;/high&gt; for line charts.&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;


```r
basel_agg %&gt;%
  
  # plot code
  ggplot(aes(x = year, y = inc_m, 
             col = hi, fill = hi)) +
  
  # ribbon geom inserted
  geom_ribbon(aes(ymin = inc_m - inc_ci,
                  ymax = inc_m + inc_ci), 
              alpha = .2) + 

  ...
```


]

.pull-right45[

&lt;br&gt;

&lt;img src="styling_files/figure-html/unnamed-chunk-51-1.png" style="display: block; margin: auto;" /&gt;

]

---

.pull-left45[

# Labels and annotations

&lt;ul&gt;
  &lt;li class="m1"&gt;&lt;span&gt;&lt;mono&gt;labs()&lt;/mono&gt; allow for the addition of titles, subtitles, axis labels and captions.&lt;/span&gt;&lt;/li&gt;
  &lt;li class="m2"&gt;&lt;span&gt;Within a canvas &lt;mono&gt;annotation()&lt;/mono&gt; adds further elements to a plot.&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;


```r
basel_agg %&gt;%
  
  # plot code
  ggplot(aes(x = year, y = inc_m, 
             col = hi, fill = hi)) +
  
  # ribbon geom inserted
  geom_ribbon(aes(ymin = inc_m - inc_ci,
                  ymax = inc_m + inc_ci), 
              alpha = .2) + 
  
  # annotation
  labs(title = "Inequality in Basel",
       subtitle = "Difference between...",
       x = "Year",
       y = "Income") + 

  ... 
```


]

.pull-right45[

&lt;br&gt;

&lt;img src="styling_files/figure-html/unnamed-chunk-53-1.png" style="display: block; margin: auto;" /&gt;

]

---

.pull-left45[

# &lt;mono&gt;annotations()&lt;/mono&gt;

&lt;ul&gt;
  &lt;li class="m1"&gt;&lt;span&gt;&lt;mono&gt;annotate()&lt;/mono&gt; can be used to &lt;high&gt;add any type of plot elements&lt;/high&gt; (layers) using vector specification.&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;


```r
basel_agg %&gt;%
  
  # plot code
  ggplot(aes(x = year, y = inc_m, 
             col = hi)) +
  
  # annotate
  annotate('line', 
           x = 2008, y = c(37500,62500)) +
  annotate('text', 
           x = 2010, y = 63000, 
           label = 'Financial crisis',
           fontface = "italic") +
  
  ...
```

]

.pull-right45[

&lt;br&gt;

&lt;img src="styling_files/figure-html/unnamed-chunk-55-1.png" style="display: block; margin: auto;" /&gt;

]

---
.pull-left45[

# &lt;mono&gt;annotations()&lt;/mono&gt;

&lt;ul&gt;
  &lt;li class="m1"&gt;&lt;span&gt;&lt;mono&gt;annotate()&lt;/mono&gt; can be used to &lt;high&gt;add any type of plot elements&lt;/high&gt; (layers) using vector specification.&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;


```r
basel_agg %&gt;%
  
  # plot code
  ggplot(aes(x = year, y = inc_m, 
             col = hi)) +
  
  # annotate
  annotate("rect", alpha = .1,
           xmin = 2007, xmax = 2009, 
           ymin = 41000, ymax = 60000)+
  annotate('text', 
           x = 2010, y = 63000, 
           label = 'Financial crisis',
           fontface = "italic") +
  
  ...
```

]

.pull-right45[

&lt;br&gt;

&lt;img src="styling_files/figure-html/unnamed-chunk-57-1.png" style="display: block; margin: auto;" /&gt;

]


---

# `ggsave()`

.pull-left45[

&lt;ul&gt;
  &lt;li class="m1"&gt;&lt;span&gt;Saves plots to the hard drive.&lt;/span&gt;&lt;/li&gt;
  &lt;li class="m2"&gt;&lt;span&gt;Key arguments:&lt;/span&gt;&lt;/li&gt;
  &lt;ul class="level"&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;file name&lt;/mono&gt; | File name/path&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;device&lt;/mono&gt; | e.g., &lt;mono&gt;".pdf"&lt;/mono&gt; or &lt;mono&gt;".png"&lt;/mono&gt;&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;path&lt;/mono&gt; | Path to folder&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;height, width&lt;/mono&gt; | Height, Width&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;unit&lt;/mono&gt; | Unit for Height, Width&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;span&gt;&lt;mono&gt;dpi&lt;/mono&gt; | Resolution&lt;/span&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/ul&gt;

]


.pull-right45[



```r
# Save as pdf
ggsave(filename = "my_plot.pdf",
       plot = my_plot,
       device = "pdf",
       path = "3_Figures",
       width = 7, 
       height = 7)

# Save as png
ggsave(filename = "my_plot.png",
       plot = my_plot,
       device = "png",
       path = "3_Figures",
       width = 7, 
       height = 7)
```

]


---

class: middle, center

&lt;h1&gt;&lt;a href=""&gt;Practical&lt;/a&gt;&lt;/h1&gt;
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
